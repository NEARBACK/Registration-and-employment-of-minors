{% extends 'main_app/base.html' %}
{% load static %}
{% block page_title %}{{page_title}}{% endblock page_title %}
{% block content %}
<section class="content">
    <div class="container-fluid">

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ -->
        <div class="row">
            <div class="col-lg-3 col-6">
                <div class="small-box bg-info">
                    <div class="inner">
                        <h3>{{total_students}}</h3>
                        <p>–í—Å–µ–≥–æ –Ω–µ—Å–æ–≤–µ—Ä—à–µ–Ω–æ–ª–µ—Ç–Ω–∏—Ö</p>
                    </div>
                    <div class="icon">
                        <i class="ion ion-bag"></i>
                    </div>
                    <a href="{% url 'manage_student' %}" class="small-box-footer">
                        –ü–æ–¥—Ä–æ–±–Ω–µ–µ <i class="fas fa-arrow-circle-right"></i>
                    </a>
                </div>
            </div>

            <div class="col-lg-3 col-6">
                <div class="small-box bg-success">
                    <div class="inner">
                        <h3>{{total_staff}}</h3>
                        <p>–í—Å–µ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</p>
                    </div>
                    <div class="icon">
                        <i class="ion ion-stats-bars"></i>
                    </div>
                    <a href="{% url 'manage_staff' %}" class="small-box-footer">
                        –ü–æ–¥—Ä–æ–±–Ω–µ–µ <i class="fas fa-arrow-circle-right"></i>
                    </a>
                </div>
            </div>

            <div class="col-lg-3 col-6">
                <div class="small-box bg-warning">
                    <div class="inner">
                        <h3>{{total_course}}</h3>
                        <p>–í—Å–µ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π</p>
                    </div>
                    <div class="icon">
                        <i class="ion ion-person-add"></i>
                    </div>
                    <a href="{% url 'manage_course' %}" class="small-box-footer">
                        –ü–æ–¥—Ä–æ–±–Ω–µ–µ <i class="fas fa-arrow-circle-right"></i>
                    </a>
                </div>
            </div>

            <div class="col-lg-3 col-6">
                <div class="small-box bg-danger">
                    <div class="inner">
                        <h3>{{total_subject}}</h3>
                        <p>–í—Å–µ–≥–æ –≤–∞–∫–∞–Ω—Å–∏–π</p>
                    </div>
                    <div class="icon">
                        <i class="ion ion-pie-graph"></i>
                    </div>
                    <a href="{% url 'manage_subject' %}" class="small-box-footer">
                        –ü–æ–¥—Ä–æ–±–Ω–µ–µ <i class="fas fa-arrow-circle-right"></i>
                    </a>
                </div>
            </div>
        </div>

        <!-- –ì—Ä–∞—Ñ–∏–∫–∏ -->
        <div class="row">

            <!-- –î–∏–∞–≥—Ä–∞–º–º–∞ –Ω–µ—Å–æ–≤–µ—Ä—à–µ–Ω–æ–ª–µ—Ç–Ω–∏—Ö/—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ -->
            <div class="col-md-6">
                <div class="card card-secondary">
                    <div class="card-header"><h3 class="card-title">–°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –∏ –Ω–µ —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö</h3></div>
                    <div class="card-body">
                        <canvas id="pieChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- –ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å -->
            <div class="col-md-6">
                <div class="card card-secondary">
                    <div class="card-header"><h3 class="card-title">–í–∞–∫–∞–Ω—Å–∏–∏</h3></div>
                    <div class="card-body">
                        <canvas id="barChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- üî• –í–æ–∑—Ä–∞—Å—Ç–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ -->
            <div class="col-md-12">
                <div class="card card-secondary">
                    <div class="card-header"><h3 class="card-title">–í–æ–∑—Ä–∞—Å—Ç –Ω–µ—Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–ª–µ—Ç–Ω–∏—Ö</h3></div>
                    <div class="card-body">
                        <canvas id="ageChart"></canvas>
                    </div>
                </div>
            </div>

        </div>
    </div>
</section>
{% endblock content %}

{% block custom_js %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
$(document).ready(function(){

    /* üç© Pie: —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö /–Ω–µ —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö */
    var pieChart = new Chart($('#pieChart'), {
        type: 'pie',
        data: {
            labels: ['—Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö', '–Ω–µ —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö'],
            datasets:[{
                data:[{{total_students}}, {{total_staff}}],
                backgroundColor:['#00a65a','#f39c12']
            }]
        },
        options:{ responsive: true }
    });

    /* üìä Bar: –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å */
    var barChart = new Chart($('#barChart'), {
        type:'bar',
        data:{
            labels:{{subject_list|safe}},
            datasets:[{
                label:'–ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å',
                data:{{attendance_list}},
                backgroundColor:'#6c757d'
            }]
        },
        options:{ responsive:true }
    });

    /* üî• Bar –≤–æ–∑—Ä–∞—Å—Ç–æ–≤ (—Ñ–∏–∫—Ç–∏–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ) */
    var ageChart = new Chart($('#ageChart'), {
        type:'bar',
        data:{
            labels:['14 –ª–µ—Ç','15 –ª–µ—Ç','16 –ª–µ—Ç','17 –ª–µ—Ç'],
            datasets:[{
                label:'–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ—Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–ª–µ—Ç–Ω–∏—Ö',
                data:[5, 12, 9, 6],   // –ú–æ–∂–µ—à—å –∏–∑–º–µ–Ω–∏—Ç—å –≤ 2 —Å–µ–∫
                backgroundColor:'#17a2b8'
            }]
        },
        options:{
            responsive:true,
            scales:{y:{beginAtZero:true}}
        }
    });

});
</script>
{% endblock custom_js %}
